(()=>{"use strict";var e={219:(e,t,r)=>{var s=r(242),n=r(396),o=r(139);const a={class:"container"},i=(0,n._)("h1",null,"Форма обратной связи",-1),l={class:"form-floating mb-3"},c=(0,n._)("label",{for:"inpName"},"Ваше имя",-1),d=(0,n._)("div",{id:"name-err",class:"text-danger err-msgs"},null,-1),u={class:"form-floating mb-3"},m={name:"phone",placeholder:"+7(___) ___-__-__",id:"inpPhone",type:"text",class:"form-control"},f=(0,n._)("label",{for:"inpPhone"},"Номер телефона",-1),h=(0,n.uE)('<div id="phone-err" class="text-danger err-msgs"></div><div class="form-floating"><textarea name="msg" class="form-control" placeholder="Ваше сообщение" id="inpMsg" style="height:100px;"></textarea><label for="floatingTextarea2">Ваше сообщение</label></div><div id="msg-err" class="text-danger err-msgs"></div><br>',4),p={class:"form-group"},g=(0,n._)("button",{class:"btn btn-success"},"Отправить",-1),v={key:0,class:"text-success"},_={class:"text-success"},x={class:"text-danger"};function b(e,t,r,b,y,w){const T=(0,n.Q2)("phone");return(0,n.wg)(),(0,n.iD)("div",a,[i,(0,n._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>w.sendForm&&w.sendForm(...e)),["prevent"])),ref:"form",action:""},[(0,n._)("div",l,[(0,n.wy)((0,n._)("input",{name:"name",type:"text",class:"form-control",id:"inpName",placeholder:"Ваше имя","onUpdate:modelValue":t[0]||(t[0]=e=>y.name=e)},null,512),[[s.nr,y.name]]),c]),d,(0,n._)("div",u,[(0,n.wy)((0,n._)("input",m,null,512),[[T]]),f]),h,(0,n._)("div",p,[g,(0,n.Uk)("   "),y.loader?((0,n.wg)(),(0,n.iD)("span",v,"отправка...")):(0,n.kq)("",!0)])],544),(0,n._)("h3",_,(0,o.zw)(y.successText),1),(0,n._)("h3",x,(0,o.zw)(y.errText),1)])}var y=r(65);const w={directives:{phone:{mounted(e){e.oninput=function(e){if(!e.isTrusted)return;const t=this.value.replace(/\D/g,"").match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);t[1]="+7",this.value=t[3]?t[1]+" ("+t[2]+") "+t[3]+(t[4]?"-"+t[4]:"")+(t[5]?"-"+t[5]:""):t[1]+" ("+t[2]}}}},data(){return{name,loader:!1,successText:"",errText:"",csrf_token:"",errArr:[]}},methods:{clearMsgs(){this.successText="",this.errText="";let e=document.getElementsByClassName("err-msgs"),t=0;while(e[t])e[t].innerHTML="",t++},async sendForm(){this.clearMsgs(),this.loader=!0;let e="/mail",t=this.$refs.form,r=new FormData(t);r.append("_token",this.csrf);let s,n=await fetch(e,{method:"POST",headers:{Accept:"application/json"},body:r});if(n.ok)s=await n.json(),s.success?(console.log("form submitted"),this.successText=`Спасибо, ${this.name} сообщение принято!`):(this.errText="Непредвиденная ошибка...",console.log(n));else if(console.log(n),422==n.status){s=await n.json();let e=s.errors;console.log(e);for(let t in e)try{let r=document.getElementById(t+"-err");r.innerText=e[t][0]}catch(o){continue}}else this.errText=`Ошибка ${n.status} ${n.statusText}`;this.loader=!1}},computed:{...(0,y.Se)(["csrf"])}};var T=r(89);const k=(0,T.Z)(w,[["render",b]]),O=k,j={state:{scrf:""},getters:{csrf:e=>e.csrf},mutations:{setCsrf(e){e.csrf=document.getElementById("_csrf_token").content}},actions:{},strict:!1},M=(0,y.MT)(j);(0,s.ri)(O).use(M).mount("#app"),M.commit("setCsrf")}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,s,n,o)=>{if(!s){var a=1/0;for(d=0;d<e.length;d++){for(var[s,n,o]=e[d],i=!0,l=0;l<s.length;l++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](s[l])))?s.splice(l--,1):(i=!1,o<a&&(a=o));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}})(),(()=>{r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,o,[a,i,l]=s,c=0;if(a.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var d=l(r)}for(t&&t(s);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},s=self["webpackChunkvue_start"]=self["webpackChunkvue_start"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=r.O(void 0,[998],(()=>r(219)));s=r.O(s)})();